<idea-plugin>
    <id>org.javamaster.HttpRequest</id>
    <name>HttpRequest</name>
    <vendor email="375709770@qq.com" url="https://www.zhihu.com/people/liang-yu-dong-44">jufeng98</vendor>

    <description>
        <![CDATA[
            Provides the ability to edit and execute HTTP requests from the code editor of IDEA.<br>
            <ul>
                <li>Support sending GET, POST and other requests</li>
                <li>Support sending WebSocket request</li>
                <li>Support Environment, build-in variable and build-in method</li>
                <li>Support jump to SpringMVC/Micronaut Controller method from url</li>
                <li>Show SpringMVC/Micronaut Controller method information when hover in url</li>
                <li>Support jump to SpringMVC/Micronaut Controller method bean field from json property</li>
                <li>Show SpringMVC/Micronaut Controller method bean field information when hover in json key</li>
                <li>
                    Support JavaScript previous handler, post handler and global handler(JavaScript syntax highlighting
                    depends on WebCalm plugin. After install WebCalm, please restart IDEA, Otherwise JavaScript syntax
                    highlighting will not work.)
                </li>
                <li>Support reading file content as http request body</li>
                <li>Support saving http response body to file</li>
                <li>When the response Content-Type is image type, it supports direct preview of the corresponding image</li>
                <li>Support preview HTML response</li>
                <li>Support preview pdf response</li>
                <li>Support searching SpringMVC/Micronaut Api in the SearchEverywhere Dialog</li>
                <li>Support Mock Server</li>
            </ul>
            Getting Started:<br>
            <ol>
                <li>Create a file with an HTTP suffix</li>
                <li>Type gtr or ptr to trigger live templates and quickly create HTTP requests</li>
                <li>Click the run button on the left side of the editor to sending request and view the response</li>
            </ol>
        ]]>
    </description>

    <change-notes>
        <![CDATA[
            <ul>
                <li><b>5.8.3</b></li>
                <ul>
                    <li>JSON key input provides intelligent completion for Spring Controller parameter Bean field names</li>
                </ul>
                <li><b>5.8.1</b></li>
                <ul>
                    <li>Adjusted minimum compatible version to 230</li>
                    <li>Services window highlights currently executing request</li>
                    <li>Bug fixes and feature improvements</li>
                </ul>
                <li><b>5.7.9</b></li>
                <ul>
                    <li>Bug fixes and feature improvements</li>
                </ul>
                <li><b>5.7.8</b></li>
                <ul>
                    <li>When response body text content is too large, language injection and JSON formatting are no longer performed to prevent IDEA from freezing</li>
                    <li>Bug fixes and feature improvements</li>
                </ul>
                <li><b>5.7.5</b></li>
                <ul>
                    <li>
                        Adjusted env file lookup logic:
                        Search from http file directory upward to project root directory, return when env.private file is found > Search from http file directory upward to project root directory, return when env file is found
                    </li>
                </ul>
                <li><b>5.7.1</b></li>
                <ul>
                    <li>Built-in method parameters support negative numbers</li>
                    <li>Path elements support #</li>
                    <li>Bug fixes and feature improvements</li>
                </ul>
                <li><b>5.6.0</b></li>
                <ul>
                    <li>HTTP PATCH and DELETE requests support request body</li>
                    <li>Path input provides intelligent completion</li>
                    <li>Bug fixes and feature improvements</li>
                </ul>
                <li><b>5.5.0</b></li>
                <ul>
                    <li>Added no-log directive</li>
                    <li>View available variables window supports adding or modifying variables directly</li>
                    <li>Bug fixes and feature improvements</li>
                </ul>
                <li><b>5.3.0</b></li>
                <ul>
                    <li>Added formatting feature</li>
                    <li>Added Mock Server feature</li>
                    <li>Bug fixes and feature improvements</li>
                </ul>
                <li><b>5.0.0</b></li>
                <ul>
                    <li>
                        Service window added vertical toolbar, including view settings (show line numbers/fold HTTP headers by default/modify content type), soft wrap, scroll to top,
                        scroll to bottom, copy request/response body content, preview html/pdf/image responses and other features
                    </li>
                    <li>Added feature to jump from query parameters to corresponding controller parameters</li>
                    <li>Added documentation tooltip for query parameters showing corresponding controller parameters</li>
                    <li>Added feature to view request history and compare historical responses</li>
                    <li>Added feature to convert request to curl</li>
                    <li>Improved curl import feature</li>
                    <li>Improved direct preview feature for image responses</li>
                    <li>HTTP header documentation tooltip internationalization</li>
                    <li>Bug fixes and feature improvements</li>
                </ul>
                <li><b>3.9.5</b></li>
                <ul>
                    <li>Improved JavaScript block injection logic</li>
                    <li>Added method to set request headers in JavaScript pre-processor</li>
                    <li>Bug fixes</li>
                </ul>
                <li><b>3.9.2</b></li>
                <ul>
                    <li>Support for version 2025.1</li>
                </ul>
                <li><b>3.9.0</b></li>
                <ul>
                    <li>Added quick create HTTP request feature</li>
                    <li>Added import from curl feature</li>
                    <li>Feature improvements and bug fixes</li>
                </ul>
                <li><b>3.8.0</b></li>
                <ul>
                    <li>Improved HTTP syntax error messages</li>
                    <li>Adjusted binary response display logic</li>
                    <li>Save binary responses to file by default</li>
                    <li>Feature improvements and bug fixes</li>
                </ul>
                <li><b>3.7.0</b></li>
                <ul>
                    <li>Added global npm library dependency import feature</li>
                    <li>Internationalization support</li>
                    <li>Bug fixes</li>
                </ul>
                <li><b>3.6.0</b></li>
                <ul>
                    <li>Added feature to execute all requests in file</li>
                    <li>Added global JavaScript file import feature</li>
                    <li>Added header name documentation tooltip</li>
                    <li>Added switch environment intention</li>
                    <li>Feature improvements and bug fixes</li>
                </ul>
                <li><b>3.5.0</b></li>
                <ul>
                    <li>Support for variable renaming</li>
                    <li>Added find usages feature</li>
                    <li>Support for all types of HTTP requests</li>
                    <li>Added quick create request feature on Controller URL</li>
                    <li>Feature improvements and bug fixes</li>
                </ul>
                <li><b>3.3.0</b></li>
                <ul>
                    <li>Added commenter</li>
                    <li>Added annotator</li>
                    <li>Added variable inspection checks and quick fixes</li>
                    <li>Added documentation tooltip for SpringMVC Controller methods corresponding to HTTP URL</li>
                    <li>Added documentation tooltip for SpringMVC Controller method fields corresponding to HTTP request/response JSON keys</li>
                    <li>Added SearchEverywhere window search for SpringMVC/Micronaut API feature</li>
                    <li>Adjusted coloring logic for variables to improve user experience</li>
                    <li>Improved request initiation logic to reduce UI freezing</li>
                    <li>Improved controller navigation logic to reduce UI freezing</li>
                    <li>Improved controller method field navigation logic to reduce UI freezing</li>
                    <li>Feature improvements and bug fixes</li>
                </ul>
                <li><b>2.8.0</b></li>
                <ul>
                    <li>Adjusted request header intelligent completion logic to improve user experience</li>
                    <li>Added APIs available in JavaScript handlers, such as jsonPath, xPath, etc.</li>
                    <li>Feature improvements and bug fixes</li>
                </ul>
                <li><b>2.7.0</b></li>
                <ul>
                    <li>Added built-in method to read file content</li>
                    <li>Environment files allow referencing built-in methods</li>
                    <li>Added path navigation for JavaScript require function</li>
                    <li>Refactored HTTP variable click navigation logic</li>
                    <li>View available variables window added display of system property variables and system environment variables</li>
                    <li>Feature improvements and bug fixes</li>
                </ul>
                <li><b>2.6.0</b></li>
                <ul>
                    <li>Built-in variables support referencing system variables, such as {{$property.java.version}}, where java.version is the system variable name</li>
                    <li>Built-in variables support referencing environment variables, such as {{$env.OS}}, where OS is the environment variable name</li>
                    <li>Intelligent completion for variable input added system variables and environment variables</li>
                    <li>Added URLSearchParams JavaScript object for handling query parameters</li>
                    <li>Allow access to system variables and environment variables in JavaScript handlers</li>
                    <li>Allow using w3c APIs and xPath operations for XML format responses in JavaScript post-handlers</li>
                    <li>
                        Save response to file path allows using variables, such as >> {{$mvnTarget}}/res.json, currently available three variables:
                        {{$projectRoot}} points to project root directory,
                        {{$historyFolder}} points to .idea/httpClient
                        {{$mvnTarget}} points to module's src/target
                    </li>
                    <li>Feature improvements and bug fixes</li>
                </ul>
                <li><b>2.5.1</b></li>
                <ul>
                    <li>### line made optional</li>
                    <li>Bug fixes</li>
                </ul>
                <li><b>2.5.0</b></li>
                <ul>
                    <li>Improved input completion experience for built-in methods</li>
                    <li>Allow request name to be empty</li>
                    <li>Specified exact minimum version</li>
                    <li>Bug fixes</li>
                </ul>
                <li><b>2.2.0</b></li>
                <ul>
                    <li>Fold headers by default</li>
                    <li>Bug fixes</li>
                </ul>
                <li><b>2.1.0</b></li>
                <ul>
                    <li>Improved HTTP syntax error recovery capability</li>
                    <li>Support comment directive parameters</li>
                    <li>Bug fixes</li>
                </ul>
                <li><b>2.0.0</b></li>
                <ul>
                    <li>Refactored HTTP syntax parsing logic with more scientific approach</li>
                    <li>More reasonable window layout</li>
                    <li>Bug fixes</li>
                </ul>
            </ul>
        ]]>
    </change-notes>

    <depends>com.intellij.java</depends>
    <depends>com.intellij.modules.json</depends>
    <depends>com.intellij.modules.platform</depends>
    <depends optional="true" config-file="httpclient-web-calm.xml">ris58h.webcalm</depends>

    <extensions defaultExtensionNs="com.intellij">
        <postStartupActivity implementation="org.javamaster.httpclient.startup.HttpPostStartupActivity"/>

        <notificationGroup id="HttpClient.STICKY_BALLOON"
                           isLogByDefault="true"
                           displayType="STICKY_BALLOON" bundle="messages.HttpClientBundle"
                           key="notification.group.httprequest.sticky_balloon"/>

        <fileType
                name="HTTP"
                implementationClass="org.javamaster.httpclient.HttpFileType"
                fieldName="INSTANCE"
                language="http"
                extensions="http"/>
        <lang.parserDefinition
                language="http"
                implementationClass="org.javamaster.httpclient.parser.HttpParserDefinition"/>
        <lang.ast.factory language="http" implementationClass="org.javamaster.httpclient.factory.HttpASTFactory"/>
        <editorHighlighterProvider filetype="HTTP"
                                   implementationClass="org.javamaster.httpclient.highlighting.HttpHighlighterProvider"/>
        <fileBasedIndex implementation="org.javamaster.httpclient.index.HttpEnvironmentIndex"/>
        <multiHostInjector
                implementation="org.javamaster.httpclient.inject.MessageBodyInjectionContributor"/>
        <codeInsight.lineMarkerProvider language="http"
                                        implementationClass="org.javamaster.httpclient.gutter.HttpLineMarkerProvider"/>
        <psi.referenceContributor language="http"
                                  implementation="org.javamaster.httpclient.reference.HttpPsiReferenceContributor"/>
        <psi.referenceContributor language="TEXT"
                                  implementation="org.javamaster.httpclient.reference.TextPsiReferenceContributor"/>
        <psi.referenceContributor language="XML"
                                  implementation="org.javamaster.httpclient.reference.XmlPsiReferenceContributor"/>
        <lang.elementManipulator forClass="org.javamaster.httpclient.psi.HttpFilePath"
                                 implementationClass="org.javamaster.httpclient.manipulator.HttpFilePathManipulator"/>
        <lang.elementManipulator forClass="org.javamaster.httpclient.psi.HttpVariableName"
                                 implementationClass="org.javamaster.httpclient.manipulator.HttpVariableNameManipulator"/>
        <lang.elementManipulator forClass="org.javamaster.httpclient.psi.HttpRequestTarget"
                                 implementationClass="org.javamaster.httpclient.manipulator.HttpRequestTargetManipulator"/>
        <renameHandler implementation="org.javamaster.httpclient.manipulator.HttpRenameHandler"/>
        <renamePsiElementProcessor
                implementation="org.javamaster.httpclient.manipulator.HttpRenamePsiElementProcessor"/>
        <configurationType implementation="org.javamaster.httpclient.runconfig.HttpConfigurationType"/>
        <runDashboardDefaultTypesProvider
                implementation="org.javamaster.httpclient.dashboard.HttpDashboardDefaultTypesProvider"/>
        <runDashboardCustomizer implementation="org.javamaster.httpclient.dashboard.HttpRunDashboardCustomizer"
                                id="httpRunDashboardCustomizer"/>
        <executor implementation="org.javamaster.httpclient.dashboard.HttpExecutor" order="first" id="httpExecutor"/>
        <programRunner implementation="org.javamaster.httpclient.dashboard.HttpProgramRunner"/>
<!--        <highlightErrorFilter implementation="org.javamaster.httpclient.suppress.MyHighlightErrorFilter"/>-->
<!--        <lang.inspectionSuppressor language="JSON"-->
<!--                                   implementationClass="org.javamaster.httpclient.suppress.JsonInspectionSuppressor"/>-->
        <annotator language="JSON"
                   implementationClass="org.javamaster.httpclient.annotator.TextVariableAnnotator"/>
        <annotator language="TEXT"
                   implementationClass="org.javamaster.httpclient.annotator.TextVariableAnnotator"/>
        <annotator language="XML"
                   implementationClass="org.javamaster.httpclient.annotator.TextVariableAnnotator"/>
        <annotator language="http"
                   implementationClass="org.javamaster.httpclient.annotator.HttpAnnotator"/>
        <localInspection groupKey="inspection.http.group.name" language="http"
                         shortName="HttpInspection" enabledByDefault="true" level="WARNING"
                         implementationClass="org.javamaster.httpclient.inspection.HttpInspection"
                         key="inspection.http.display.name" bundle="messages.HttpClientBundle"/>
        <localInspection groupKey="inspection.http.group.name" language="JSON"
                         shortName="MyJsonInspection" enabledByDefault="true" level="WARNING"
                         implementationClass="org.javamaster.httpclient.inspection.MyJsonInspection"
                         key="inspection.http.display.name" bundle="messages.HttpClientBundle"/>
        <localInspection groupKey="inspection.http.group.name" language="TEXT"
                         shortName="MyTextInspection" enabledByDefault="true" level="WARNING"
                         implementationClass="org.javamaster.httpclient.inspection.MyTextInspection"
                         key="inspection.http.display.name" bundle="messages.HttpClientBundle"/>
<!--        <psi.referenceContributor language="JSON"-->
<!--                                  implementation="org.javamaster.httpclient.reference.JsonValuePsiReferenceContributor"/>-->
        <lang.documentationProvider language="JSON"
                                    implementationClass="org.javamaster.httpclient.doc.JsonKeyMethodFieldDocumentationProvider"/>
        <completion.contributor language="http" id="HttpCompletionContributor" order="last"
                                implementationClass="org.javamaster.httpclient.completion.HttpCompletionContributor"/>
        <completion.contributor language="JSON" id="JsonCompletionContributor" order="last"
                                implementationClass="org.javamaster.httpclient.completion.JsonCompletionContributor"/>
        <typedHandler implementation="org.javamaster.httpclient.typeHandler.HttpTypedHandler"/>
        <braceMatcher filetype="http"
                      implementationClass="org.javamaster.httpclient.braceMatcher.HttpBraceMatcher"/>
        <lang.foldingBuilder language="http"
                             implementationClass="org.javamaster.httpclient.folding.HttpFoldingBuilder"/>
        <lang.psiStructureViewFactory language="http"
                                      implementationClass="org.javamaster.httpclient.structure.HttpRequestStructureViewFactory"/>
        <defaultLiveTemplates file="liveTemplates/request.xml"/>
        <liveTemplateContext contextId="REQUEST"
                             implementation="org.javamaster.httpclient.liveTemplates.HttpTemplateContextType"/>
        <liveTemplateContext baseContextId="REQUEST" contextId="REQUEST_RESPONSE_HANDLER_PATH"
                             implementation="org.javamaster.httpclient.liveTemplates.HttpJsHandlerTemplateContextType"/>
        <liveTemplateContext contextId="HTTP_CLIENT_ENVIRONMENT_INSIDE_ENVIRONMENT"
                             implementation="org.javamaster.httpclient.liveTemplates.HttpEnvFileTemplateContextType"/>
        <multiHostInjector
                implementation="org.javamaster.httpclient.inject.ScriptBodyInjectionBackupContributor"/>
        <lang.commenter language="http" implementationClass="org.javamaster.httpclient.commenter.HttpCommenter"/>
        <gotoDeclarationHandler id="JsStringPathGotoDeclarationHandler"
                                implementation="org.javamaster.httpclient.reference.JsStringPathGotoDeclarationHandler"/>
        <psi.referenceContributor language="http"
                                  implementation="org.javamaster.httpclient.reference.HttpUrlControllerMethodPsiReferenceContributor"/>
        <psi.referenceContributor language="JSON"
                                  implementation="org.javamaster.httpclient.reference.JsonKeyControllerMethodFieldPsiReferenceContributor"/>
        <lang.documentationProvider language="http"
                                    implementationClass="org.javamaster.httpclient.doc.HttpUrlControllerMethodDocumentationProvider"/>
        <lang.documentationProvider language="http"
                                    implementationClass="org.javamaster.httpclient.doc.HttpHeadersDocumentationProvider"/>
        <lang.documentationProvider language="http"
                                    implementationClass="org.javamaster.httpclient.doc.HttpDocumentationProvider"/>
        <lang.documentationProvider language="JSON"
                                    implementationClass="org.javamaster.httpclient.doc.HttpDocumentationProvider"/>
        <lang.documentationProvider language="TEXT"
                                    implementationClass="org.javamaster.httpclient.doc.HttpDocumentationProvider"/>
        <psi.treeChangePreprocessor
                implementation="org.javamaster.httpclient.scan.support.ControllerPsiTreeChangePreprocessor"/>
        <searchEverywhereContributor implementation="org.javamaster.httpclient.symbol.ApisGotoSEContributor$Factory"/>
        <lang.findUsagesProvider language="http"
                                 implementationClass="org.javamaster.httpclient.usage.HttpFindUsagesProvider"/>
        <codeInsight.declarativeInlayProvider language="JAVA"
                                              implementationClass="org.javamaster.httpclient.inlay.UrlInlineHintsProvider"
                                              isEnabledByDefault="true"
                                              group="URL_PATH_GROUP"
                                              providerId="http.client.url"
                                              bundle="messages.HttpClientBundle"
                                              nameKey="url.name"
                                              descriptionKey="url.description"/>
        <codeInsight.inlayActionHandler handlerId="HttpInlayHintsCollector"
                                        implementationClass="org.javamaster.httpclient.inlay.HttpInlayActionHandler"/>
        <scratch.creationHelper language="http"
                                implementationClass="org.javamaster.httpclient.scratch.HttpRequestScratchFileCreationHelper"/>
        <fileEditorProvider implementation="org.javamaster.httpclient.provider.HtmlFileEditorProvider"/>
        <copyPastePreProcessor implementation="org.javamaster.httpclient.copyPaste.CurlCopyPastePreProcessor"/>
        <lang.formatter language="http"
                        implementationClass="org.javamaster.httpclient.formatter.HttpFormattingModelBuilder"/>
        <intentionAction>
            <language>http</language>
            <className>org.javamaster.httpclient.intent.HttpSwitchEnvironmentIntention</className>
            <bundleName>messages.HttpClientBundle</bundleName>
            <categoryKey>intention.http.category.name</categoryKey>
        </intentionAction>
        <intentionAction>
            <language>http</language>
            <className>org.javamaster.httpclient.intent.ConvertToCurlAndCpIntention</className>
            <bundleName>messages.HttpClientBundle</bundleName>
            <categoryKey>intention.http.category.name</categoryKey>
        </intentionAction>
    </extensions>

    <actions>
        <action class="org.javamaster.httpclient.action.ApiSearchEverywhereAction">
            <keyboard-shortcut first-keystroke="control alt SLASH" keymap="$default"/>
        </action>

        <group id="httpToolbarLeftBtnGroup">
            <action class="org.javamaster.httpclient.action.ShowAddHttpPopupAction"/>
            <action class="org.javamaster.httpclient.action.ShowRequestHistoryAction"/>
            <separator/>
            <action class="org.javamaster.httpclient.action.ShowVariableFormAction"/>
            <action class="org.javamaster.httpclient.action.ConvertToCurlAndCpAction"/>
            <separator/>
            <action class="org.javamaster.httpclient.action.RunAllRequestAction"/>
        </group>

        <group id="addToHttpGroup">
            <action class="org.javamaster.httpclient.action.addHttp.AddGetAction"/>
            <separator/>
            <action class="org.javamaster.httpclient.action.addHttp.AddPostJsonAction"/>
            <action class="org.javamaster.httpclient.action.addHttp.AddPostParamAction"/>
            <action class="org.javamaster.httpclient.action.addHttp.AddPostMultipartTextAction"/>
            <action class="org.javamaster.httpclient.action.addHttp.AddPostMultipartFileAction"/>
            <separator/>
            <action class="org.javamaster.httpclient.action.addHttp.AddWsAction"/>
            <separator/>
            <action class="org.javamaster.httpclient.action.addHttp.ImportCurlAction"/>
            <separator/>
            <action class="org.javamaster.httpclient.action.addHttp.AddEnvFileAction"/>
            <action class="org.javamaster.httpclient.action.addHttp.AddEnvPrivateFileAction"/>
        </group>

        <group id="httpToolbarRightBtnGroup">
            <action class="org.javamaster.httpclient.action.ShowExamplePopupAction"/>
        </group>

        <group id="exampleHttpGroup">
            <action class="org.javamaster.httpclient.action.example.GetExampleAction"/>
            <separator/>
            <action class="org.javamaster.httpclient.action.example.PostExampleAction"/>
            <action class="org.javamaster.httpclient.action.example.PresentationAction"/>
            <action class="org.javamaster.httpclient.action.example.ScriptExampleAction"/>
            <action class="org.javamaster.httpclient.action.example.AuthExampleAction"/>
            <separator/>
            <action class="org.javamaster.httpclient.action.example.WsExampleAction"/>
            <action class="org.javamaster.httpclient.action.example.MockServerExampleAction"/>
            <separator/>
            <action class="org.javamaster.httpclient.action.example.CryptoJsExampleAction"/>
        </group>

        <group id="httpDashboardVerticalGroup">
            <action class="org.javamaster.httpclient.action.dashboard.ScrollToTopAction"/>
            <action class="org.javamaster.httpclient.action.dashboard.ScrollToEndAction"/>
            <action class="org.javamaster.httpclient.action.dashboard.CopyReqResBodyAction"/>
        </group>
    </actions>

</idea-plugin>